"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7099],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=o,h=d["".concat(c,".").concat(m)]||d[m]||p[m]||r;return n?a.createElement(h,i(i({ref:t},u),{},{components:n})):a.createElement(h,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4404:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:1},i="@state and @action",s={unversionedId:"basic-tutorial/state-action",id:"basic-tutorial/state-action",title:"@state and @action",description:"Reactant provides @state for decorating the immutable shared state of React and @action for decorating the state mutation updates, It's based on Redux and Immer.",source:"@site/docs/basic-tutorial/state-action.md",sourceDirName:"basic-tutorial",slug:"/basic-tutorial/state-action",permalink:"/docs/basic-tutorial/state-action",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/basic-tutorial/state-action.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Basic Tutorial",permalink:"/docs/category/basic-tutorial"},next:{title:"React Component",permalink:"/docs/basic-tutorial/component"}},c={},l=[{value:"<code>@state</code>",id:"state",level:2},{value:"<code>@action</code>",id:"action",level:2},{value:"Tips",id:"tips",level:2}],u={toc:l};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"state-and-action"},"@state and @action"),(0,o.kt)("p",null,"Reactant provides ",(0,o.kt)("inlineCode",{parentName:"p"},"@state")," for decorating the immutable shared state of React and ",(0,o.kt)("inlineCode",{parentName:"p"},"@action")," for decorating the state mutation updates, It's based on ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/redux"},"Redux")," and ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/immerjs/immer"},"Immer"),"."),(0,o.kt)("h2",{id:"state"},(0,o.kt)("inlineCode",{parentName:"h2"},"@state")),(0,o.kt)("p",null,"In the following example, ",(0,o.kt)("inlineCode",{parentName:"p"},"list")," in the Foo module is NOT a shared state of the React, and it cannot be automatically updated to the React component anywhere it is changed, but the ",(0,o.kt)("inlineCode",{parentName:"p"},"count")," property decorated by ",(0,o.kt)("inlineCode",{parentName:"p"},"@state")," is a shared state of the React."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"@injectable()\nclass Foo {\n  list = [];\n\n  @state\n  count: number = 0;\n}\n")),(0,o.kt)("h2",{id:"action"},(0,o.kt)("inlineCode",{parentName:"h2"},"@action")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"@action")," decorates the method for updating the current module's state, and the following example ",(0,o.kt)("inlineCode",{parentName:"p"},"increase")," is a method that can be used to update the current module's state."),(0,o.kt)("p",null,"Reactant module state management is based on Redux, which is identical to the mutation update operation we generally use because it uses ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/immerjs/immer"},"Immer"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"@injectable()\nclass Foo {\n  list = [];\n\n  @state\n  count: number = 0;\n\n  @action\n  increase() {\n    this.count += 1;\n  }\n}\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"If a method is NOT decorated with ",(0,o.kt)("inlineCode",{parentName:"p"},"@action")," but attempts to change the state value, it will NOT be automatically updated to the UI by default, but if ",(0,o.kt)("inlineCode",{parentName:"p"},"devOptions")," is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"{ autoFreeze: true }")," in the ",(0,o.kt)("a",{parentName:"p",href:"#"},"createApp")," interface, then any method that is NOT decorated with ",(0,o.kt)("inlineCode",{parentName:"p"},"@action")," that attempts to update the state will throw an error.")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Therefore, it is recommended to enable ",(0,o.kt)("inlineCode",{parentName:"p"},"autoFreeze")," in development mode and disable ",(0,o.kt)("inlineCode",{parentName:"p"},"autoFreeze")," in production mode (If it is NOT disabled, then it will likely bring some performance loss).")),(0,o.kt)("h2",{id:"tips"},"Tips"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Both ",(0,o.kt)("inlineCode",{parentName:"li"},"@state")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"@action")," support inheritance")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"@injectable()\nclass Foo {\n  @state\n  count: number = 0;\n\n  @action\n  increase() {\n    this.count += 1;\n  }\n}\n\n@injectable()\nclass Foo1 extends Foo {\n  @state\n  count: number = 0;\n\n  @action\n  increase() {\n    super.increase();\n    this.count += 1;\n  }\n}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@action")," supports calling other actions that execute other update states and merge updates into the UI (They must be the current module state, cross-module states will still be updated one by one).")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"@injectable()\nclass Foo {\n  @state\n  list: number[] = [];\n\n  @state\n  count: number = 0;\n\n  test: string = 'test';\n\n  // `increase()` will combine update `list` and `count` state.\n  @action\n  increase() {\n    this.count += 1;\n    this.list(this.count);\n  }\n\n  @action\n  add(text: number) {\n    this.list.push(text);\n  }\n}\n")))}p.isMDXComponent=!0}}]);